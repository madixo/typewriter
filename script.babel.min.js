"use strict";function _classPrivateMethodInitSpec(e,t){_checkPrivateRedeclaration(e,t),t.add(e)}function _classPrivateMethodGet(e,t,s){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return s}function _classPrivateFieldInitSpec(e,t,s){_checkPrivateRedeclaration(e,t),t.set(e,s)}function _checkPrivateRedeclaration(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldGet(e,t){return _classApplyDescriptorGet(e,_classExtractFieldDescriptor(e,t,"get"))}function _classApplyDescriptorGet(e,t){return t.get?t.get.call(e):t.value}function _classPrivateFieldSet(e,t,s){return _classApplyDescriptorSet(e,_classExtractFieldDescriptor(e,t,"set"),s),s}function _classExtractFieldDescriptor(e,t,s){if(!t.has(e))throw new TypeError("attempted to "+s+" private field on non-instance");return t.get(e)}function _classApplyDescriptorSet(e,t,s){if(t.set)t.set.call(e,s);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=s}}function _get_random(){return 0==this.fluctuation?0:Math.random()*(2*this.options.fluctuation)-this.options.fluctuation}function _animate2(e=performance.now()){if(this.paused)return console.log(`${new TypewriterModulePauseDebugMessage(this)}`),void _classPrivateFieldGet(this,_res).call(this,this.options.debug?new TypewriterModulePauseDebugMessage(this):new TypewriterModulePauseMessage(this));const{delay:t}=this.options;(void 0===this.last?t+Math.ceil(this.salt):e-this.last)>=t+this.salt&&(this.options.debug&&console.log(`${new TypewriterModuleTickDebugMessage(this)}`),this.handlers.anim(),this.salt=_classPrivateFieldGet(this,_random),this.last=e),this.handlers.cond()?requestAnimationFrame(_classPrivateMethodGet(this,_animate,_animate2).bind(this)):_classPrivateFieldGet(this,_res).call(this,this.options.debug?new TypewriterModuleDoneDebugMessage(this):new TypewriterModuleDoneMessage(this))}function _sleep2(){_classPrivateFieldGet(this,_res3).call(this,this.options.debug?new TypewriterModuleDoneDebugMessage(this):new TypewriterModuleDoneMessage(this))}var _paused,_resumed,_res,_random,_animate,_id,_res2,_res3,_sleep,_current;class TypewriterError extends Error{constructor(e){super(e)}}class TypewriterModuleMessage{constructor(e){this.module=e}}class TypewriterModuleDebugMessage extends TypewriterModuleMessage{constructor(e){super(e)}get message(){return this.module.constructor.name}toString(){return this.message}}class TypewriterModuleBeginMessage extends TypewriterModuleMessage{}class TypewriterModuleBeginDebugMessage extends TypewriterModuleDebugMessage{get message(){return`${super.message} began!`}}class TypewriterModuleTickMessage extends TypewriterModuleMessage{}class TypewriterModuleTickDebugMessage extends TypewriterModuleDebugMessage{get message(){return`${super.message} tick!`}}class TypewriterModuleDoneMessage extends TypewriterModuleMessage{}class TypewriterModuleDoneDebugMessage extends TypewriterModuleDebugMessage{get message(){return`${super.message} done!`}}class TypewriterModulePauseMessage extends TypewriterModuleMessage{}class TypewriterModulePauseDebugMessage extends TypewriterModuleDebugMessage{get message(){return`${super.message} paused!`}}class TypewriterModule{constructor(e,t){this.typewriter=e,this.target=e.target,this.options={...{debug:!1},...t}}action(){throw new TypewriterError("Typewriter module has to implement action() method!")}}_paused=new WeakMap,_resumed=new WeakMap;class TypewriterPauseableModule extends TypewriterModule{constructor(e,t){super(e,t),_classPrivateFieldInitSpec(this,_paused,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,_resumed,{writable:!0,value:void 0}),_classPrivateFieldSet(this,_paused,!1),_classPrivateFieldSet(this,_resumed,!1)}resume(){_classPrivateFieldSet(this,_paused,!1),_classPrivateFieldSet(this,_resumed,!0)}pause(){_classPrivateFieldSet(this,_paused,!0)}get paused(){return _classPrivateFieldGet(this,_paused)}set paused(e){e?this.pause():this.resume()}get resumed(){return _classPrivateFieldGet(this,_resumed)}set resumed(e){_classPrivateFieldSet(this,_resumed,!1)}}_res=new WeakMap,_random=new WeakMap,_animate=new WeakSet;class TypewriterAnimation extends TypewriterPauseableModule{constructor(e,t={},s){super(e,s={...{delay:100,fluctuation:50},...s}),_classPrivateMethodInitSpec(this,_animate),_classPrivateFieldInitSpec(this,_random,{get:_get_random,set:void 0}),_classPrivateFieldInitSpec(this,_res,{writable:!0,value:void 0}),this.handlers=new Proxy(t,{get:(e,t)=>e.hasOwnProperty(t)?e[t]:()=>{throw new TypewriterError(`${e.name}.${t} not specified!`)}})}animate(){return new Promise(e=>{_classPrivateFieldSet(this,_res,e),this.resumed?this.resumed=0:this.handlers.init(),this.salt=_classPrivateFieldGet(this,_random),this.options.debug&&console.log(`${new TypewriterModuleBeginDebugMessage(this)}`),_classPrivateMethodGet(this,_animate,_animate2).call(this)})}resume(){return super.resume(),this.action()}pause(){super.pause()}action(){return this.animate()}}class TypewriterWrite extends TypewriterAnimation{constructor(e,t,s){super(e,{init:()=>{this.buffer=[...this.text]},anim:()=>{this.target.innerHTML+=this.buffer.shift()},cond:()=>this.buffer.length},s),this.text=t}}class TypewriterBackspace extends TypewriterAnimation{constructor(e,t,s){super(e,{init:()=>{this.text=[...this.target.innerText],this.counter=this.to_delete},anim:()=>{this.text.pop(),this.target.innerHTML=this.text.join(""),this.counter--},cond:()=>this.counter},s),this.to_delete=t}}class TypewriterSleep extends TypewriterPauseableModule{constructor(e,t,s){super(e,s),this.ms=t}}_id=new WeakMap,_res2=new WeakMap;class TypewriterPauseableSleep extends TypewriterSleep{constructor(...e){super(...e),_classPrivateFieldInitSpec(this,_id,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,_res2,{writable:!0,value:void 0})}sleep(e){return this.options.debug&&console.log(`${new TypewriterModuleBeginDebugMessage(this)}`),new Promise(t=>{_classPrivateFieldSet(this,_res2,t),_classPrivateFieldSet(this,_id,setTimeout(()=>t(this.options.debug?new TypewriterModuleDoneDebugMessage(this):new TypewriterModuleDoneMessage(this)),e))})}action(){if(this.resumed){let e=performance.now()-this.init;return this.resumed=0,e>=this.ms?new Promise(e=>requestAnimationFrame(()=>e(this.options.debug?new TypewriterModuleDoneDebugMessage(this):new TypewriterModuleDoneMessage(this)))):this.sleep(this.ms-e)}return this.init=performance.now(),this.sleep(this.ms)}resume(){super.resume(),this.action()}pause(){super.pause(),_classPrivateFieldGet(this,_id)&&(clearTimeout(_classPrivateFieldGet(this,_id)),_classPrivateFieldGet(this,_res2).call(this,this.options.debug?new TypewriterModulePauseDebugMessage(this):new TypewriterModulePauseMessage(this)))}}_res3=new WeakMap,_sleep=new WeakSet;class TypewriterFrameSleep extends TypewriterSleep{constructor(e,t){super(e,void 0,t),_classPrivateMethodInitSpec(this,_sleep),_classPrivateFieldInitSpec(this,_res3,{writable:!0,value:void 0})}action(){return this.sleep()}pause(){}resume(){}sleep(){return this.options.debug&&console.log(`${new TypewriterModuleBeginDebugMessage(this)}`),new Promise(e=>{_classPrivateFieldSet(this,_res3,e),requestAnimationFrame(_classPrivateMethodGet(this,_sleep,_sleep2).bind(this))})}}class TypewriterDelete extends TypewriterModule{constructor(e,t,s){super(e,s),this.to_delete=t}action(){return this.options.debug&&console.log(`${new TypewriterModuleBeginDebugMessage(this)}`),new Promise(e=>{requestAnimationFrame(()=>{let t=this.target.innerText;this.target.innerHTML=t.substr(0,t.length-this.to_delete-1),e(this.options.debug?new TypewriterModuleDoneDebugMessage(this):new TypewriterModuleDoneMessage(this))})})}}_current=new WeakMap;class Typewriter{constructor(e,t){_classPrivateFieldInitSpec(this,_current,{writable:!0,value:void 0}),this.target=e,this.initText=e.innerText,this.steps=[],this.step=0,this.paused=!1,this.options={...{repeat:!1,sleep:0,sleepRewrite:0,sleepBeforeRepeat:0},...t}}newStep(e){this.steps.push(e)}write(e,t){return t={...this.options,options:t},this.newStep(new TypewriterWrite(this,e,t)),t.sleep>0&&this.newStep(new TypewriterPauseableSleep(this,t.sleep,t)),this}rewrite(e,t,s){return s={...this.options,...s},this.newStep(new TypewriterBackspace(this,e,s)),s.sleepRewrite>0&&this.newStep(new TypewriterPauseableSleep(this,s.sleepRewrite,s)),this.newStep(new TypewriterWrite(this,t,s)),s.sleep>0&&this.newStep(new TypewriterPauseableSleep(this,s.sleep,s)),this}backspace(e,t){return t={...this.options,...t},this.newStep(new TypewriterBackspace(this,e,t)),t.sleep>0&&this.newStep(new TypewriterPauseableSleep(this,t.sleep,t)),this}delete(e,t){return t={...this.options,...t},this.newStep(new TypewriterDelete(this,e,t)),t.sleep>0&&this.newStep(new TypewriterPauseableSleep(this,t.sleep,t)),this}sleep(e){return this.newStep(new TypewriterPauseableSleep(this,e,this.options)),this}init(){let e=[];for(let t=0;t<this.steps.length;t++){const s=this.steps[t];if((e.push(s),s instanceof TypewriterAnimation)&&!(this.steps[t+1]instanceof TypewriterSleep))if(t!=this.steps.length-1)e.push(new TypewriterFrameSleep(this,this.options));else{if(!this.options.repeat)continue;this.options.sleepBeforeRepeat?e.push(new TypewriterPauseableSleep(this,this.options.sleepBeforeRepeat,this.options)):e.push(new TypewriterFrameSleep(this,this.options))}}this.step=0,this.steps=[...e]}start(){this.init(),this.animate()}restart(){this.step=0,this.resume()}async animate(){if(this.step>=this.steps.length){if(!this.options.repeat)return;this.step=0}_classPrivateFieldSet(this,_current,this.steps[this.step++]).action().then(e=>{e instanceof TypewriterModuleDoneDebugMessage&&console.log(`${e}`),requestAnimationFrame(this.animate.bind(this))})}get current(){return _classPrivateFieldGet(this,_current)}set current(e){}stop(){this.pause(),requestAnimationFrame(()=>this.target.innerHTML=this.initText)}pause(){_classPrivateFieldGet(this,_current)instanceof TypewriterPauseableModule&&_classPrivateFieldGet(this,_current).pause()}resume(){_classPrivateFieldGet(this,_current)instanceof TypewriterPauseableModule&&_classPrivateFieldGet(this,_current).resume().then(this.animate.bind(this))}}let t=new Typewriter(document.querySelector("#typewriter"),{repeat:!0,delay:100,fluctuation:75,sleepBeforeRepeat:1500,debug:!0});t.write("Hobbest").sleep(1500).rewrite(3,"ies, Interests & Activities",{sleep:3500}).delete(31).start();